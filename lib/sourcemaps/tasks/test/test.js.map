{"version":3,"sources":["tasks/test/test.ts"],"names":[],"mappings":";AAGA,6BAAkB,YAAY,CAAC,CAAA;AAC/B,MAAY,KAAK,WAAM,OAAO,CAAC,CAAA;AAE/B,iBAAS,CAAC,IAAU,EAAE,MAAkB;IACpC,IAAI,MAAM,GAAqC,MAAM,CAAC,MAAM,CAAC;IAE7D,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;QACd,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;YACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC,CAAC;YAC/D,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAAC,IAAI,CAAC,CAAC;YACL,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;iBACtB,IAAI,CAAC,oBAAK,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;iBAChC,IAAI,CAAC,OAAO,EAAE;gBACX,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC,CAAC;iBACD,IAAI,CAAC,KAAK,EAAE;gBACT,OAAO,CAAC,IAAI,EAAE,CAAC;YACnB,CAAC,CAAC,CAAC;QACX,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAA","file":"../../../tasks/test/test.js","sourcesContent":["import { Gulp } from 'gulp';\r\nimport { NodeBuildOption } from '../../task';\r\nimport { TaskConfig } from 'development-tool';\r\nimport mocha from 'gulp-mocha';\r\nimport * as chalk from 'chalk';\r\n\r\nexport = (gulp: Gulp, config: TaskConfig) => {\r\n    let option: NodeBuildOption = <NodeBuildOption>config.option;\r\n\r\n    gulp.task('test', () => {\r\n        if (!option.test) {\r\n            console.log(chalk.red('has not configed test src in option.'));\r\n            return null;\r\n        } else {\r\n           return gulp.src(option.test)\r\n                .pipe(mocha(option.mochaOptions))\r\n                .once('error', () => {\r\n                    process.exit(1);\r\n                })\r\n                .once('end', () => {\r\n                    process.exit();\r\n                });\r\n        }\r\n    });\r\n}\r\n"]}